services:
  frontend:
    build:
      context: frontend
      dockerfile: Dockerfile
    ports:
      - "80:80"
    volumes:
      - ./uploads:/usr/share/nginx/uploads:ro # Serve files (read-only for security)
    restart: unless-stopped
    networks:
      - app-network

  asp-net:
    build:
      context: .
      dockerfile: Dockerfile.web
    environment:
      - UPLOAD_PATH=/uploads # <-- Your app reads this
    volumes:
      - ./uploads:/uploads # Mount host ./uploads â†’ container /uploads
    networks:
      - app-network
    ports:
      - "8080:8080"

networks:
  app-network:
    driver: bridge
